# 贪吃蛇游戏插件

## 插件简介
这是一个集成在YJ Studio中的贪吃蛇游戏面板插件，可以在主程序中作为独立面板使用。支持手动控制和AI自动寻路两种游戏模式。

## 游戏规则
控制蛇移动吃掉食物，每吃一个食物蛇身增长一节并得分，撞到墙壁或自身游戏结束。

## 操作方法

### 手动模式
- **方向键↑**：向上移动
- **方向键↓**：向下移动
- **方向键←**：向左移动
- **方向键→**：向右移动
- **开始游戏按钮**：开始/重新开始游戏

### 自动寻路模式
- **自动寻路模式复选框**：启用/禁用AI自动控制
- AI将使用A*算法自动寻找最短路径到达食物
- 黄色格子显示AI计算的移动路径
- 当AI无法找到安全路径时，会尝试随机移动避免死亡

## 游戏特点
1. **基本功能**
   - 20x20的游戏网格
   - 蛇头(绿色)和蛇身(深绿色)不同颜色区分
   - 红色圆形食物
   - 每次吃到食物得10分
   - 游戏速度随分数增加而提高

2. **AI寻路功能**
   - 使用A*算法进行智能寻路
   - 实时路径计算和可视化
   - 智能避障，避免撞到自身
   - 当无法找到安全路径时的备用策略
   - 自动模式下的游戏速度优化

3. **界面优化**
   - 寻路状态实时显示
   - 标题栏显示当前模式([AI]标识)
   - 路径可视化(黄色路径指示)

## 功能特性
- 支持游戏状态保存/恢复
- 自适应主题颜色
- 高分显示
- 游戏结束检测
- **AI自动寻路算法**
- **路径可视化**
- **智能避障系统**

## 算法说明

### A*寻路算法
- **启发式函数**：使用曼哈顿距离计算
- **代价函数**：f(n) = g(n) + h(n)
  - g(n)：从起点到当前节点的实际代价
  - h(n)：从当前节点到目标的启发式代价
- **障碍物处理**：将蛇身作为障碍物，但不包括尾部(因为移动后尾部会消失)
- **路径优化**：选择最短且安全的路径

### 备用策略
当A*算法无法找到安全路径时：
1. 随机选择一个不会立即死亡的方向
2. 避免反向移动
3. 优先选择远离墙壁和蛇身的方向

## 安装使用
1. 将`snake_game`文件夹放入`panel_plugins`目录
2. 在主程序中选择"添加面板" → "贪吃蛇游戏"
3. 点击"开始游戏"按钮
4. 选择游戏模式：
   - 手动模式：使用方向键控制
   - 自动模式：勾选"自动寻路模式"，观看AI表演

## 界面说明
- **顶部控制区域**
  - 当前分数显示
  - 开始游戏/重新开始按钮
  - 自动寻路模式开关
  - AI状态信息显示
- **游戏区域**
  - 20x20网格显示游戏区域
  - 绿色：蛇头和蛇身
  - 红色：食物
  - 黄色：AI计算的移动路径(仅自动模式)

## 游戏模式对比

| 特性 | 手动模式 | 自动模式 |
|------|----------|----------|
| 控制方式 | 键盘方向键 | AI自动控制 |
| 游戏速度 | 200ms/步 | 150ms/步 |
| 路径显示 | 无 | 黄色路径指示 |
| 决策算法 | 玩家决定 | A*算法 |
| 状态显示 | 分数 | 分数+AI状态 |

## 技术特性
- **算法复杂度**：A*算法时间复杂度 O(b^d)，其中b为分支因子，d为解的深度
- **内存优化**：使用堆优化的优先队列，减少内存占用
- **实时计算**：每次吃到食物后重新计算最优路径
- **状态保存**：支持游戏状态和AI状态的完整保存/恢复

## 开发信息
- **开发者**: YJ Studio
- **版本**: 1.1.0
- **依赖**: PySide6
- **新增功能**: AI自动寻路算法、路径可视化、智能避障

## 更新日志

### v1.1.0
- ✨ 新增AI自动寻路模式
- ✨ 实现A*算法智能寻路
- ✨ 添加路径可视化功能
- ✨ 智能避障和备用移动策略
- 🔧 优化游戏速度和用户体验
- 🔧 改进界面布局和状态显示

### v1.0.0
- 🎉 初始版本发布
- ✨ 基本贪吃蛇游戏功能
- ✨ 手动键盘控制
- ✨ 分数系统和游戏状态保存